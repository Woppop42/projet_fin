{% extends 'base.html.twig' %}

{% block body %}
	<div class="profile-background-color">
		<div class="container-wrapper" style="height: 100%;">
			<div class="container col-12 text-center d-flex align-item-center" id="container">
				<nav class="navbar navbar-expand-lg" data-bs-theme="dark" style=" margin-bottom: 20px; width: 100%;">
					<div class="container-fluid">
						<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon bg-dark text-light"></span>
						</button>
						<div class="collapse navbar-collapse" id="navbarColor01">
							<a href="javascript:history.back()">
								<svg xmlns="http://www.w3.org/2000/svg" height="24" viewbox="0 -960 960 960" width="24"><path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"/></svg>
							</a>
							<ul class="navbar-nav me-auto">
								<li class="nav-item me-3">
									<a class="nav-link active text-dark" href="{{path('app_jeux')}}"><img
										src="{{ asset('images/JA-01.png')}}" alt="Logo du site" style="width: 150px; height: 65px;">
									{# <span class="visually-hidden">(current)</span> #}
									</a>
								</li>
								{% if app.user %}
									<li class="nav-item me-3">
										<a class="nav-link text-dark" href="{{path('logout')}}">Se déconnecter</a>
									</li>
								{% else %}
									<li class="nav-item me-3">
										<a class="nav-link text-dark" href="{{path('login')}}">Se connecter</a>
									</li>
								{% endif %}
								<li class="nav-item me-3">
									<a class="nav-link text-dark" href="{{path('liste_jeux')}}">Trouver un partenaire</a>
								</li>
								<li class="nav-item me-3">
									<a class="nav-link text-dark" href="{{path('app_messagerie')}}">Messagerie</a>
								</li>
								{% if is_granted('ROLE_ADMIN') %}
									<li class="nav-item dropdown">
										<a class="nav-link text-dark" href="{{path('app_admin')}}" aria-expanded="false">BACKOFFICE</a>
									</li>
								{% endif %}
							</ul>
							{% if app.user %}
								<a class="navbar-brand" href="{{path('profil_perso', {id: app.user.id})}}"><img src="{{asset('images/' ~ app.user.photoProfil)}}" alt="Photo de profil" style="width: 50px; height: 50px; border-radius: 50%;"></a>
							{% endif %}
						</div>
					</div>
				</nav>
				<div class="container col-12 text-center">
					<h1>Liste de vos conversations</h1>

					<h2 class="text-center text-dark">Conversations que vous avez commencé</h2>
					{% for conv in convSend %}
						<div class="card mb-3">
							<div class="card-body">
								<h4 class="card-title">{{conv.sujet}}</h4>
								<h6 class="card-subtitle mb-2 text-muted">{{conv.chercheur.pseudo}}</h6>
								<p class="card-text">Conversation commencée le
									{{conv.createdAt|date("d/m/Y")}}</p>
								<a href="{{path('show_conversation', {id: conv.id})}}" class="btn btn-outline-info">Voir la conversation</a>
							</div>
						</div>

					{% endfor %}

					<h2 class="text-center text-dark mt-3">Conversations que votre interlocuteur a commencé</h2>
					{% for conv2 in convReceived %}
						<div class="card mb-3">
							<div class="card-body">
								<h4 class="card-title">{{conv2.sujet}}</h4>
								<h6 class="card-subtitle mb-2 text-muted">{{conv2.annonceur.pseudo}}</h6>
								<p class="card-text">Conversation commencée le
									{{conv2.createdAt|date('d/m/Y')}}</p>
								<a href="{{path('show_conversation', {id: conv2.id})}}" class="btn btn-outline-info mb-3">Voir la conversation</a>
							</div>
						</div>

					{% endfor %}
				</div>

			</div>
		</div>
	</div>
{% endblock %}
